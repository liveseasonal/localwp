window.mkdfToursFront=function(a){"use strict";function b(){"undefined"!=typeof mkdf&&""!=typeof mkdf||g(),"undefined"!=typeof mkdf&&h(),j(),m(),k(),o(),n().fieldsHelper.init(),n().handleSearch.init()}function c(){l().init()}function d(){}function e(){}function f(){return"undefined"!=typeof mkdf}function g(){var b=a(".mkdf-tour-item-single-holder"),c=b.find(".mkdf-tour-item-wrapper ul li a"),d=b.find(".mkdf-tour-item-section");c.first().addClass("mkdf-active-item"),c.on("click",function(){c.removeClass("mkdf-active-item");var b=a(this),e=b.attr("href");b.addClass("mkdf-active-item"),d.length&&d.each(function(){var b=a(this);b.attr("id")===e?(b.show(),"#tour-item-location-id"===e&&i()):b.hide()})})}function h(){var b=a(".mkdf-tour-item-single-holder"),c=b.find(".mkdf-tour-item-wrapper ul li a");c.on("click",function(){var b=a(this),c=b.attr("href");"#tour-item-location-id"===c&&i()})}function i(){"undefined"!=typeof mkdf&&""!=typeof mkdf&&mkdf.modules.shortcodes.mkdfShowGoogleMap()}function j(){var b=a(".mkdf-tour-reviews-input-wrapper");if(b.length){var c="icon_star_alt",d="icon_star",e=function(b){b.find(".mkdf-tour-reviews-star-holder").mouseenter(function(){a(this).add(a(this).prevAll()).find(".mkdf-tour-reviews-star").removeClass(c).addClass(d),a(this).nextAll().find(".mkdf-tour-reviews-star").removeClass(d).addClass(c)}).click(function(){b.find(".mkdf-tour-reviews-hidden-input").val(a(this).index()+1)}),b.find(".mkdf-tour-reviews-rating-holder").mouseleave(function(){var e=b.find(".mkdf-tour-reviews-hidden-input").val();e=""===e?0:parseInt(e,10),a(this).find(".mkdf-tour-reviews-star-holder").each(function(b){a(this).find(".mkdf-tour-reviews-star").removeClass(e>b?c:d).addClass(e>b?d:c)})}).trigger("mouseleave")};b.each(function(){var b=a(this),c=b.find(".mkdf-tour-reviews-criteria-holder");c.each(function(){e(a(this))})})}}function k(){var b=a(".mkdf-tours-carousel");b.length&&b.each(function(){var b=a(this);b.hasClass("owl-carousel")||b.addClass("owl-carousel"),b.waitForImages(function(){b.animate({opacity:1})}),b.owlCarousel({autoplay:!0,autoplayHoverPause:!0,dots:!1,nav:!0,smartSpeed:400,loop:!0,navText:['<span class="mkdf-prev-icon"><i class="lnr lnr-chevron-left"></i></span>','<span class="mkdf-next-icon"><i class="lnr lnr-chevron-right"></i></span>'],responsive:{0:{items:1},768:{items:2},1025:{items:3}}})})}function l(){var b,c=a(".mkdf-tours-list-holder"),d=function(a){a.animate({opacity:1}),b=a.isotope({percentPosition:!0,itemSelector:".mkdf-tour-list-item-inner",transitionDuration:"0.4s",isInitLayout:!0,hiddenStyle:{opacity:0},visibleStyle:{opacity:1},masonry:{columnWidth:".mkdf-tours-list-grid-sizer"}}),f()&&mkdf.modules.common.mkdfInitParallax()},e=function(b){var c=b.find(".mkdf-tour-list-filter-item");c.on("click",function(d){d.preventDefault(),d.stopPropagation();var e=a(this),f=e.data("type");c.removeClass("mkdf-tour-list-current-filter"),e.addClass("mkdf-tour-list-current-filter"),f="undefined"==typeof f?"*":"."+f,b.find(".mkdf-tours-list-holder-inner").isotope({filter:f})})},g=function(a){var b=a.find(".mkdf-tour-list-filter-item");b.removeClass("mkdf-tour-list-current-filter"),b.eq(0).addClass("mkdf-tour-list-current-filter"),a.find(".mkdf-tours-list-holder-inner").isotope({filter:"*"})},h=function(b){var c=b.find(".mkdf-tours-list-pagination-data"),d=b.find(".mkdf-tours-list-holder-inner"),e=function(b){var d={action:"mkdf_tours_list_ajax_pagination",fields:c.find("input").serialize()};a.ajax({url:mkdfToursAjaxURL,data:d,dataType:"json",type:"POST",success:function(a){a.havePosts&&c.find('[name="next_page"]').val(a.nextPage),f()&&mkdf.modules.common.mkdfInitParallax(),b.call(this,a)}})},h=function(){var c=b.find(".mkdf-tours-load-more-button"),f=b.find(".mkdf-tours-pagination-holder"),h=!1;c.length&&c.on("click",function(i){i.preventDefault(),i.stopPropagation();var j=c.data("loading-label"),k=c.text();c.text(j),g(b),h||(h=!0,e(function(b){if(b.havePosts===!0){c.text(k);var e=a(b.html);d.append(e),d.waitForImages(function(){d.isotope("appended",e).isotope("reloadItems")})}else c.remove(),f.html(b.message);h=!1}))})};h()};return{init:function(){c.length&&"undefined"!=typeof a.fn.isotope&&c.each(function(){d(a(this).find(".mkdf-tours-list-holder-inner")),e(a(this)),h(a(this))})}}}function m(){var b=a(".mkdf-tour-cover-boxes-inner");b.length&&b.each(function(){var b=0,c=1;"undefined"!=typeof a(this).data("active-element")&&a(this).data("active-element")!==!1&&(c=parseFloat(a(this).data("active-element")),b=c-1);var d=3;b=c>d?0:b,a(this).find(".mkdf-tour-cover-boxes-item-inner").eq(b).addClass("active");var e=a(this);a(this).find(".mkdf-tour-cover-boxes-item-inner").each(function(){a(this).hover(function(){a(e).find(".mkdf-tour-cover-boxes-item-inner").removeClass("active"),a(this).addClass("active")})})})}function n(){var b=a(".mkdf-tours-search-main-filters-holder form"),c=a(".mkdf-tours-type-filters-inputs"),d=function(){var c=function(){var a=b.find(".mkdf-tours-range-input"),c=b.find(".mkdf-tours-price-range-field"),d=b.find('[name="min_price"]'),e=b.find('[name="max_price"]'),f=c.data("min-price"),g=c.data("max-price"),h=c.data("chosen-min-price"),i=c.data("chosen-max-price");a.length&&a.each(function(){var a=this,b=noUiSlider.create(a,{start:[h,i],connect:!0,step:1,range:{min:[f],max:[g]},format:{to:function(a){return Math.floor(a)},from:function(a){return a}}});b.on("update",function(a){var b=a[0],f=a[1],g=c.data("currency-symbol"),h=c.data("currency-symbol-position"),i="left"===h?g+b:b+g,j="left"===h?g+f:b+f;c.val(i+" - "+j),d.val(b),e.val(f)})})},d=function(){var a="undefined"!=typeof mkdfToursSearchData?mkdfToursSearchData.tours:[],a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,local:a});b.find(".mkdf-tours-keyword-search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"tours",source:a})},e=function(){var a="undefined"!=typeof mkdfToursSearchData?mkdfToursSearchData.destinations:[],a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,local:a});b.find(".mkdf-tours-destination-search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"destinations",source:a})},f=function(){var b=a(".mkdf-tours-select-placeholder"),c=function(a){var b=a.val();""===b?a.addClass("mkdf-tours-select-default-option"):a.removeClass("mkdf-tours-select-default-option")};b.length&&b.each(function(){var b=a(this);c(a(this)),b.on("change",function(){c(a(this))})})};return{init:function(){c(),d(),e(),f()}}}(),e=function(){var d=function(a){var b="";location.href.match(/\?.*/)&&document.referrer&&(b=location.href.replace(/\?.*/,"")),window.history.replaceState({page:b+"?"+a},"",b+"?"+a)},e=function(b,c,e,f){var g=b.find('input[type="submit"]'),h=a(".mkdf-tours-search-content"),i=a(".mkdf-tours-search-page-holder"),j=!1;c="undefined"!=typeof c?c:!0,e="undefined"!=typeof e?e:!0,f="undefined"!=typeof f?f:!1;var k=g.data("searching-label"),l=g.val();if(!j){c&&g.val(k),e&&b.find('[name="page"]').val(1),j=!0,h.addClass("mkdf-tours-searching");var m={action:"tours_search_handle_form_submission"};m.fields=b.serialize(),a.ajax({type:"GET",url:mkdfToursAjaxURL,dataType:"json",data:m,success:function(b){c&&g.val(l),h.removeClass("mkdf-tours-searching"),j=!1,h.find(".mkdf-grid-row").html(b.html),d(b.url),a(".mkdf-tours-search-pagination").remove(),h.append(b.paginationHTML),f&&a("html, body").animate({scrollTop:i.offset().top-80},700)}})}},f=function(b){a("body").hasClass("post-type-archive-tour-item")&&b.on("submit",function(a){a.preventDefault(),a.stopPropagation(),e(b)})},g=function(b){var c=a(".mkdf-search-ordering-item"),d=b.find('[name="order_by"]'),f=b.find('[name="order_type"]');c.length&&c.on("click",function(g){g.preventDefault(),g.stopPropagation();var h=a(this);c.removeClass("mkdf-search-ordering-item-active"),h.addClass("mkdf-search-ordering-item-active");var i=h.data("order-by"),j=h.data("order-type");"undefined"!=typeof i&&"undefined"!=typeof j&&(d.val(i),f.val(j)),e(b,!1,!1)})},h=function(b){var c=a(".mkdf-tours-search-view-item"),d=b.find('[name="view_type"]');c.length&&c.on("click",function(f){f.preventDefault(),f.stopPropagation();var g=a(this);c.removeClass("mkdf-tours-search-view-item-active"),g.addClass("mkdf-tours-search-view-item-active");var h=g.data("type");"undefined"!=typeof h&&d.val(h),e(b,!1,!1)})},i=function(b){var c=a(".mkdf-tours-search-pagination"),d=b.find('[name="page"]');c.length&&a(document).on("click",".mkdf-tours-search-pagination li",function(c){c.preventDefault(),c.stopPropagation();var f=a(this),g=f.data("page");"undefined"!=typeof g&&d.val(g),e(b,!0,!1,!0)})};return{init:function(){f(b,c),g(b),h(b),i(b)}}}();return{fieldsHelper:d,handleSearch:e}}function o(){var b=a(".mkdf-tours-top-reviews-carousel");b.length&&"undefined"!=typeof a.fn.owlCarousel&&b.each(function(){var b=a(this);b.hasClass("owl-carousel")||b.addClass("owl-carousel"),b.waitForImages(function(){b.css("visibility","visible")}),b.owlCarousel({items:1,loop:!0,autoplay:!1,autoplayTimeout:4e3,smartSpeed:300,autoplayHoverPause:!0,nav:!0,dots:!0,navText:['<span class="mkdf-prev-icon"><span class="lnr lnr-chevron-up"></span></span>','<span class="mkdf-next-icon"><span class="lnr lnr-chevron-down"></span></span>'],animateOut:"fadeOutUp",animateIn:"fadeInUp"})})}var p={};return"undefined"!=typeof mkdf&&""==typeof mkdf&&(mkdf.modules.tours=p),p.mkdfOnDocumentReady=b,p.mkdfOnWindowLoad=c,p.mkdfOnWindowResize=d,p.mkdfOnWindowScroll=e,p.mkdfInitTourItemTabs=g,p.mkdfTourTabsMapTrigger=h,p.mkdfTourReviewsInit=j,p.toursCoverBoxes=m,p.toursList=l,p.tourCarousel=k,p.initTopReviewsCarousel=o,a(document).ready(b),a(window).load(c),a(window).resize(d),a(window).scroll(e),p}(jQuery);